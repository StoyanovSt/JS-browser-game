<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stage 2</title>
    <link rel="stylesheet" href="./stage_2.css">
    <link rel="icon" href="../favicon.png">
</head>

<body>
    <section class="content">
        <article class="image-container3">
            <p class="bee-eater-voice">Beware of me!</p>
            <img src="../images/european-bee-eater.jpg" alt="Bee eater">
        </article>
        <i class="far fa-dot-circle first-target"></i>
        <i class="far fa-dot-circle second-target"></i>
        <i class="far fa-dot-circle third-target"></i>
        <i class="far fa-dot-circle fourth-target"></i>
        <i class="far fa-dot-circle fifth-target"></i>
        <article class="image-container">
            <img src="../images/bee5.jpg" alt="Maya the bee">
        </article>
        <article class="image-container2">
            <img src="../images/jar.jpg" alt="Honey jar">
        </article>
        <!-- Script for grams -->
        <h3 class="target-info">Pollen in grams: <span class="pollen-grams">0</span>/5</h3>
        <!-- dropdown menu -->
        <h3 class="hint">Hint <i class="fas fa-arrow-down"></i></h3>
        <p class="hint-content movement">Use keyboard arrows to move the bee.</p>
        <p class="hint-content pollen">To collect pollen land on a flower.</p>
        <button class="next-level-btn"><a href="">Congratulations! You win!</a></button>
    </section>

    <script>
        // HINT
        const hint = document.querySelector('.fas');
        const hintContent = document.querySelectorAll('.hint-content');

        hint.addEventListener('click', (e) => {
            Array.from(hintContent).forEach(el => {
                if (el.style.display === "block") {
                    el.style.display = "none";
                    hint.setAttribute('class', 'fas fa-arrow-down');
                } else {
                    el.style.display = "block";
                    hint.setAttribute('class', 'fas fa-arrow-up');
                }
            })
        });

        // BEE
        const bee = document.querySelector('.image-container');
        const beeEater = document.querySelector('.image-container3');

        let beeEaterIncrementor = 0;
        let beeIncrementorX = 0;
        let beeIncrementorY = 0;
        let gramsPollen = 0;

        document.addEventListener('keydown', (e) => {
            let keyName = e.key;

            if (keyName === 'ArrowRight') {
                beeIncrementorX += 10;
                bee.style.marginLeft = `${beeIncrementorX}px`;
                beeEaterIncrementor += 5;
                beeEater.style.marginLeft = `${beeEaterIncrementor}px`;
            } else if (keyName === 'ArrowLeft') {
                beeIncrementorX -= 10;
                bee.style.marginLeft = `${beeIncrementorX}px`;
                beeEaterIncrementor += 5;
                beeEater.style.marginLeft = `${beeEaterIncrementor}px`;
            } else if (keyName === 'ArrowDown') {
                beeIncrementorY += 10;
                bee.style.marginTop = `${beeIncrementorY}px`;
                beeEaterIncrementor += 5;
                beeEater.style.marginTop = `${beeEaterIncrementor}px`;
            } else if (keyName === 'ArrowUp') {
                beeIncrementorY -= 10;
                bee.style.marginTop = `${beeIncrementorY}px`;
                beeEaterIncrementor -= 5;
                beeEater.style.marginTop = `${beeEaterIncrementor}px`;
            }

            // WHEN LANDING ON TARGET
            if (gramsPollen < 5) {
                if (bee.style.marginTop === '140px' && bee.style.marginLeft === '-380px') {
                    alert('You have successfully gain a pollen! Go ahead! Collect them all!');
                    document.querySelector('.pollen-grams').textContent = ++gramsPollen;
                }

                if (bee.style.marginTop === '250px' && bee.style.marginLeft === '-440px') {
                    alert('You have successfully gain a pollen! Go ahead! Collect them all!');
                    document.querySelector('.pollen-grams').textContent = ++gramsPollen;
                }

                if (bee.style.marginTop === '-40px' && bee.style.marginLeft === '-590px') {
                    alert('You have successfully gain a pollen! Go ahead! Collect them all!');
                    document.querySelector('.pollen-grams').textContent = ++gramsPollen;
                }

                if (bee.style.marginTop === '20px' && bee.style.marginLeft === '-720px') {
                    alert('You have successfully gain a pollen! Go ahead! Collect them all!');
                    document.querySelector('.pollen-grams').textContent = ++gramsPollen;
                }

                if (bee.style.marginTop === '-160px' && bee.style.marginLeft === '-870px') {
                    alert('You have successfully gain a pollen! Go ahead! Collect them all!');
                    document.querySelector('.pollen-grams').textContent = ++gramsPollen;
                }
            } else {
                document.querySelector('.next-level-btn').style.display = "block";
            }
        });

        setInterval(() => {
            if (document.querySelector('.bee-eater-voice').textContent === 'I will catch you!') {
                document.querySelector('.bee-eater-voice').textContent = 'Beware of me!';
            } else {
                document.querySelector('.bee-eater-voice').textContent = 'I will catch you!';
            }

        }, 7000);
    </script>
</body>

</html>